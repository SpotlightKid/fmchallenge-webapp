{% extends "base.html" %}

{% block content %}
{% if current_user.is_authenticated %}
{% if user_entry %}
{% if user_entry.is_published %}
<h1 class="mt-5">Your Competition Entry</h1>
{% else %}
<h1 class="mt-5">Review Competition Entry Draft</h1>
{% endif %}
<p class="no-emphasis">
<strong>Title:</strong> {{ user_entry.title }}<br/>
<strong>Artist:</strong> {{ user_entry.artist }}<br/>
<strong>URL:</strong> <a href="{{ user_entry.url }}">{{ user_entry.url }}</a><br/>
</p>
<strong>Description:</strong><br/>
<div class="flask-markdown shadow-sm rounded">
{{ user_entry.description | markdown }}
</div>
<strong>Production details:</strong><br/>
<div class="flask-markdown shadow-sm rounded">
{{ user_entry.production_details | markdown }}
</div>
{% if user_entry.is_published %}
{% if user_entry.is_approved %}
<p class="alert alert-successed">Your entry was published on
  {{ user_entry.published_on.strftime('%Y-%m-%d %H:%M UTC') }} and has been approved to enter
  the competition.</p>
{% else %}
<p class="alert alert-info">Your entry was published on
  {{ user_entry.published_on.strftime('%Y-%m-%d %H:%M UTC') }} and is waiting for approval.</p>
{% endif %}
{% else %}
<p class="alert alert-warning">Your entry is not published yet and will <strong>not</strong> enter
the competition.</p>
{% endif %}
{% if not user_entry.is_published %}
<br/>
<p>
  <a class="btn btn-secondary" href="{{ url_for('competition.submit_entry') }}">Update entry</a>
  &nbsp;
  <a class="btn btn-danger" href="{{ url_for('competition.publish_entry') }}">Publish Entry</a>
</p>
{% endif %}
{% else %}
<h1 class="mt-5">Enter the Competition</h1>
{% filter markdown %}
To enter the competition:

* Read the [rules](/rules).
* Upload your track to [Archive.org](https://archive.org/upload/).
* Fill out the <a href="{{ url_for('competition.submit_entry') }}">submisison form</a> and publish
  your track before the deadline.
{% endfilter %}

{% endif %}
{% else %}
<h1 class="mt-5">So You Want To Enter the Competition?</h1>
<p>To submit your entry into the competition, you must first
<a href="{{ url_for('user.register') }}">register an account</a> on this site and then come back
to this page.</p>

<p>Already have an account? <a href="{{ url_for('user.login') }}">Sign in</a>.</p>
{% filter markdown %}
Before you create and submit your entry, make sure you check out the [rules](/rules)!

Your can submit your entry to the competition from **15.09.2018** until the deadline on
**14.10.2018 23:59:59 UTC**.
{% endfilter %}
{% endif %}
{% endblock %}
